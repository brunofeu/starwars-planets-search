(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],{10:function(e,t,a){e.exports=a.p+"static/media/star-wars-4.c41f740a.svg"},12:function(e,t,a){e.exports=a(19)},17:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),l=a.n(c),o=(a(17),a(5)),u=a(1),i=a(2),s=Object(n.createContext)(),m=a(10),f=a.n(m);var p=function(){var e=Object(n.useContext)(s),t=e.data,a=e.isLoading,c=e.setNameFilterText,l=e.filters,m=e.getNumericFilters,p=e.removeFilter,d=e.getSortOrder,b=l.filterByName.name,v=Object(n.useState)({value:0}),E=Object(i.a)(v,2),j=E[0],O=E[1],h=Object(n.useState)(["population","orbital_period","diameter","rotation_period","surface_water"]),y=Object(i.a)(h,2),N=y[0],C=y[1],g=Object(n.useState)({column:"name",sort:"ASC"}),k=Object(i.a)(g,2),S=k[0],w=k[1];Object(n.useEffect)((function(){O({column:N[0],comparison:"maior que",value:0})}),[N]);var x=function(e){var t=e.target;O(Object(u.a)(Object(u.a)({},j),{},Object(o.a)({},t.name,t.value)))},I=function(e){var t=e.target.value;w(Object(u.a)(Object(u.a)({},S),{},{sort:t}))};return r.a.createElement("main",{className:"App-header"},r.a.createElement("img",{className:"App-logo",src:f.a,alt:"logo-starwars"}),r.a.createElement("div",{className:"filter-container"},r.a.createElement("div",{className:"filter-form"},r.a.createElement("input",{className:"filter-by-name",type:"text",placeholder:"Filtrar por Nome","data-testid":"name-filter",value:b,onChange:function(e){return c(e.target)}}),r.a.createElement("div",{className:"filter-details"},r.a.createElement("div",{className:"filter-by-number"},r.a.createElement("select",{"data-testid":"column-filter",name:"column",onChange:x},N.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("select",{"data-testid":"comparison-filter",name:"comparison",onChange:x},r.a.createElement("option",{selected:!0,value:"maior que"},"maior que"),r.a.createElement("option",{value:"menor que"},"menor que"),r.a.createElement("option",{value:"igual a"},"igual a")),r.a.createElement("input",{name:"value",value:j.value,type:"number","data-testid":"value-filter",onChange:x}),r.a.createElement("button",{type:"button",onClick:function(){m(j),C(N.filter((function(e){return e!==j.column})))},"data-testid":"button-filter",disabled:0===N.length},"Adicionar Filtro")),r.a.createElement("div",{className:"filter-sort"},r.a.createElement("select",{"data-testid":"column-sort",name:"sort",onChange:function(e){var t=e.target;w(Object(u.a)(Object(u.a)({},S),{},{column:t.value}))}},!a&&Object.keys(t[0]).map((function(e){return r.a.createElement("option",{key:e,name:"column",value:e},e)}))),r.a.createElement("label",{htmlFor:"ASC",className:"column-sort-radio"},r.a.createElement("input",{type:"radio",value:"ASC",name:"order",id:"ASC",onChange:I,checked:"ASC"===S.sort,"data-testid":"column-sort-input-asc"}),"ASC"),r.a.createElement("label",{htmlFor:"DESC",className:"column-sort-radio"},r.a.createElement("input",{type:"radio",value:"DESC",name:"order",id:"DESC",onChange:I,"data-testid":"column-sort-input-desc",checked:"DESC"===S.sort}),"DESC"),r.a.createElement("button",{type:"button","data-testid":"column-sort-button",onClick:function(){d(S)}},"Ordenar")))),r.a.createElement("ul",null,l.filterByNumericValues.map((function(e,t){var a=e.column,n=e.comparison,c=e.value;return r.a.createElement("li",{key:t,"data-testid":"filter"},"".concat(a," ").concat(n," ").concat(c),r.a.createElement("button",{className:"del-btn",type:"button",onClick:function(){return function(e){var t=l.filterByNumericValues.filter((function(t){return t.column!==e}));C(N.concat(e)),p(t)}(a)}},"Apagar"))})))))};var d=function(){var e=Object(n.useContext)(s),t=e.data,a=e.isLoading,c=e.filteredPlanets;return r.a.createElement("div",{className:"table-container"},0===c.length?r.a.createElement("h3",null,"Nenhum planeta atende ao filtro selecionado"):!a&&r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,Object.keys(t[0]).map((function(e){return r.a.createElement("th",{key:e},e.replace("_"," ").toUpperCase())})))),r.a.createElement("tbody",null,c.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",{key:e.name,"data-testid":"planet-name"},e.name),Object.values(e).slice(1,13).map((function(e,t){return r.a.createElement("td",{key:t},"object"===typeof e?e.map((function(e){return r.a.createElement("a",{key:e,href:e,className:"list-url"},e,r.a.createElement("br",null))})):function(e){return e.includes("https")?r.a.createElement("a",{href:e,className:"list-url"},e):e}(e))})))})))))},b=a(3),v=a.n(b),E=a(11),j=a(7),O="https://swapi-trybe.herokuapp.com/api/planets/";function h(){return(h=Object(j.a)(v.a.mark((function e(){var t,a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(O);case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,(n=a.results).forEach((function(e){return delete e.residents})),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=function(){return h.apply(this,arguments)};var N=function(e){var t=e.children,a=Object(n.useState)([]),c=Object(i.a)(a,2),l=c[0],o=c[1],m=Object(n.useState)(!0),f=Object(i.a)(m,2),p=f[0],d=f[1],b=Object(n.useState)([]),O=Object(i.a)(b,2),h=O[0],N=O[1],C=Object(n.useState)({filterByName:{name:""},filterByNumericValues:[],order:{column:"name",sort:"ASC"}}),g=Object(i.a)(C,2),k=g[0],S=g[1];function w(){return(w=Object(j.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,y();case 3:t=e.sent,N(t),o(t),d(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){!function(){w.apply(this,arguments)}()}),[]),Object(n.useEffect)((function(){var e=l.filter((function(e){return e.name.toLowerCase().includes(k.filterByName.name.toLowerCase())}));N(e)}),[k.filterByName,l]),Object(n.useEffect)((function(){var e="",t=k.filterByNumericValues;0===t.length?N(l):(e=l,t.forEach((function(t){var a=t.column,n=t.comparison,r=t.value;switch(n){case"maior que":e=e.filter((function(e){return parseInt(e[a],10)>parseInt(r,10)}));break;case"menor que":e=e.filter((function(e){return parseInt(e[a],10)<parseInt(r,10)}));break;case"igual a":e=e.filter((function(e){return parseInt(e[a],10)===parseInt(r,10)}))}})),N(e))}),[k.filterByNumericValues]),Object(n.useEffect)((function(){var e=k.order.column,t="";p&&N(h),p||0===h.length||(t=Number.isNaN(parseInt(h[0][e],10))?function(){var e=k.order,t=e.sort,a=e.column,n="";switch(t){case"ASC":n=h.sort((function(e,t){return e[a]>t[a]?1:t[a]>e[a]?-1:0}));break;case"DESC":n=h.sort((function(e,t){return e[a]>t[a]?-1:t[a]>e[a]?1:0}))}return n}():function(){var e=k.order,t=e.sort,a=e.column,n="";switch(t){case"ASC":n=h.sort((function(e,t){return parseInt(e[a],10)>parseInt(t[a],10)?1:parseInt(t[a],10)>parseInt(e[a],10)?-1:0}));break;case"DESC":n=h.sort((function(e,t){return parseInt(e[a],10)>parseInt(t[a],10)?-1:parseInt(t[a],10)>parseInt(e[a],10)?1:0}))}return n}(),N(t)),S(Object(u.a)({},k))}),[k.order,h]);var x={data:l,isLoading:p,filteredPlanets:h,setNameFilterText:function(e){var t=e.value;S(Object(u.a)(Object(u.a)({},k),{},{filterByName:{name:t}}))},getNumericFilters:function(e){S(Object(u.a)(Object(u.a)({},k),{},{filterByNumericValues:[].concat(Object(E.a)(k.filterByNumericValues),[e])}))},filters:k,removeFilter:function(e){S(Object(u.a)(Object(u.a)({},k),{},{filterByNumericValues:e}))},getSortOrder:function(e){S(Object(u.a)(Object(u.a)({},k),{},{order:e}))}};return r.a.createElement(s.Provider,{value:x},t)};var C=function(){return r.a.createElement(N,null,r.a.createElement(p,null),r.a.createElement(d,null))};l.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.67e68cc6.chunk.js.map